
<div class="container mt-5">
  <h1>Register</h1>
  <form id="registerForm">
    <div class="form-group">
      <label for="registerUsername">Username</label>
      <input
        type="text"
        class="form-control"
        id="registerUsername"
        placeholder="Enter username"
        required
      />
    </div>
    <div class="form-group">
      <label for="registerPassword">Password</label>
      <input
        type="password"
        class="form-control"
        id="registerPassword"
        placeholder="Password"
        required
      />
    </div>
    <div class="form-group">
      <label for="registerFirstName">First Name</label>
      <input
        type="text"
        class="form-control"
        id="registerFirstName"
        placeholder="Enter first name"
        required
      />
    </div>
    <div class="form-group">
      <label for="registerLastName">Last Name</label>
      <input
        type="text"
        class="form-control"
        id="registerLastName"
        placeholder="Enter last name"
        required
      />
    </div>
    <div class="form-group">
      <label for="registerEmail">Email address</label>
      <input
        type="email"
        class="form-control"
        id="registerEmail"
        placeholder="Enter email"
        required
      />
    </div>
    <button type="submit" class="btn btn-primary">Register</button>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>

<script>
  $(document).ready(function () {
    $("#registerForm").submit(function (event) {
      event.preventDefault();
      var username = $("#registerUsername").val();
      var password = $("#registerPassword").val();
      var firstName = $("#registerFirstName").val();
      var lastName = $("#registerLastName").val();
      var email = $("#registerEmail").val();

      // Perform client-side validation
      if (!validateFields(username, password, firstName, lastName, email)) {
        return;
      }

      // Prepare the data to be sent
      var data = {
        username: username,
        password: password,
        first_name: firstName,
        last_name: lastName,
        email: email,
      };

      // Perform the AJAX POST request
      $.ajax({
        url: "http://localhost/food-recipe-app/rest/user",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify(data),
        success: function (response) {
          // Registration successful
          Swal.fire({
            icon: "success",
            title: "Registration Successful",
            text: "You have successfully registered.",
          });
        },
        error: function (xhr, status, error) {
          // Registration failed
          Swal.fire({
            icon: "error",
            title: "Registration Failed",
            text: "Sorry, there was an error during registration.",
          });
        },
      });
    });

    function validateFields(username, password, firstName, lastName, email) {
      // Add your field validation logic here
      // Example validation: Check if any field is empty
      if (
        username === "" ||
        password === "" ||
        firstName === "" ||
        lastName === "" ||
        email === ""
      ) {
        Swal.fire({
          icon: "error",
          title: "Validation Error",
          text: "Please fill in all fields.",
        });
        return false;
      }

      // Additional validation rules can be added as needed

      return true;
    }
  });
</script>
